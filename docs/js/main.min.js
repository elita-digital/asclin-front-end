$(function(){$(window).on("load",function(){var e=window.navigator.userAgent,e=/trident/gi.test(e)||/msie/gi.test(e);console.log("is_ie :>> ",e),0!=e&&$("body").addClass("ie-active")}),$(".js-modal-call").click(function(){var e=$(this).data("modal");$("body").addClass("no-scroll"),$(".modal").fadeIn(260),$(e).siblings().hide(),$(e).show(),$("body *:not(.modal *)").attr("tabindex",-1),i=sessionStorage.getItem("hintCount")}),$(".modal__overlay, .modal__close").click(function(){$("body").removeClass("no-scroll"),$(".modal").fadeOut(260),$(".modal .modal__content-wrapper").fadeOut(300),setTimeout(function(){$("#modal-error").show()},350),$("body *:not(.modal *)").removeAttr("tabindex")}),$(".js-info-open").on("click focus",function(){$(this).toggleClass("info-box__title--open"),$(this).siblings(".info-box__content").slideToggle(260),($(this).parent().hasClass("modal__info-box")?$(".modal"):$("body")).animate({scrollTop:$(this).offset().top},260)}),$("#settings-user-photo").change(function(){var e;this.files&&this.files[0]&&((e=new FileReader).onload=function(e){$(".settings__input-wrapper--picture>img").attr("src",e.target.result)},e.readAsDataURL(this.files[0]))}),$("#new-article-pic").change(function(){var e;this.files&&this.files[0]&&((e=new FileReader).onload=function(e){$(".new-article__image").attr("src",e.target.result)},e.readAsDataURL(this.files[0]))});var t=1,i=0;hint=$(".settings__button-hint"),$(".settings__add-workplace").click(function(){t<=5&&($(".settings__workplace:last-of-type").clone().insertBefore($(this)).find($("input")).val(""),t++,i<=1&&hint.text($(this).data("title")).show(60))}),$(".settings__add-workplace").on("contextmenu",function(e){return 1<t&&($(".settings__workplace:last-of-type").remove(),t--,i++,sessionStorage.setItem("hintCount",i)),!1}),$(".settings__add-workplace").on({mouseenter:function(){i<=1&&hint.text($(this).data("title")).show(60)},mouseleave:function(){hint.hide(),i++,sessionStorage.setItem("hintCount",i)}}),hint.click(function(){i++,sessionStorage.setItem("hintCount",i)}),$("#registration-username, #settings-username").inputmask({mask:"*{3,30} *{3,30} *{3,30}",greedy:!0,validator:"[0-9A-Za-z!]",onincomplete:function(){var e=this;$(this).parent().addClass("invalid"),setTimeout(function(){$(e).parent().removeClass("invalid")},3e3)}}),$("input[type='tel']").inputmask({mask:"+7 (999) 999-99-99",greedy:!0,validator:"[0-9]"}),$("#contact-form-email, #settings-email, #registration-email").inputmask({alias:"email",definitions:{"*":{validator:"[0-9A-Za-z!_-]",cardinality:1,casing:"lower"}}}),$("#settings-insta").inputmask({mask:"https://inst\\agr\\am.com/*{1,30}",greedy:!1,definitions:{"*":{validator:"[.@0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}),$("#settings-fb").inputmask({mask:"https://f\\acebook.com/*{1,30}",greedy:!1,definitions:{"*":{validator:"[.@0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}),$(".new-article__content").on("focus",function(){$(".new-article__input-wrapper--image").addClass("go-back")}),$(".new-article__content").on("focusout",function(){$(".new-article__input-wrapper--image").removeClass("go-back")}),$(".header__burger").click(function(){$(".header__burger-row").toggleClass("header__burger-row--open"),$(".header__menu").slideToggle(260)}),$(document).mouseup(function(e){var t=$(".header__menu, .header__burger"),i=window.matchMedia("(max-width: 1023px)").matches;!t.is(e.target)&&0===t.has(e.target).length&&i&&($(".header__menu").slideUp(260),$(".header__burger-row").removeClass("header__burger-row--open"))}),$(window).on("load resize orientationchange",function(){window.matchMedia("(max-width: 699px)").matches?$("#registration-add-spec, #settings-add-spec").attr("placeholder","Доп. специальность"):$("#registration-add-spec, #settings-add-spec").attr("placeholder","Дополнительная специальность")})});