$(function(){var e=window.navigator.userAgent;(/trident/gi.test(e)||/msie/gi.test(e))&&$("body").addClass("ie-active"),$(".js-modal-call").click(function(){var e=$(this).data("modal");$("body").addClass("no-scroll"),$(".modal").fadeIn(260),$(e).siblings().hide(),$(e).show(),$("body *:not(.modal *)").attr("tabindex",-1),a=sessionStorage.getItem("hintCount")}),$(".modal__overlay, .modal__close").click(function(){$("body").removeClass("no-scroll"),$(".modal").fadeOut(260),$(".modal .modal__content-wrapper").fadeOut(300),$("body *:not(.modal *)").removeAttr("tabindex")}),$(".js-info-open").on("click focus",function(){$(this).toggleClass("info-box__title--open"),$(this).siblings(".info-box__content").slideToggle(260),($(this).parent().hasClass("modal__info-box")?$(".modal"):$("body")).animate({scrollTop:$(this).offset().top},260)}),$(".settings-user-photo").change(function(){var e;this.files&&this.files[0]&&((e=new FileReader).onload=function(e){$(".settings__input-wrapper--picture>img").attr("src",e.target.result)},e.readAsDataURL(this.files[0]))}),$(".new-article-pic").change(function(){var e;this.files&&this.files[0]&&((e=new FileReader).onload=function(e){$(".new-article__image").attr("src",e.target.result)},e.readAsDataURL(this.files[0]))});var t=1,a=0;function s(e,t,a){var i=2<arguments.length&&void 0!==a?a:"success",n=$(e).parent("#modal-settings")?$(e).find(".settings__top-box"):$(e);n.find(".modal__error").remove(),n.find(".modal__success").remove(),t&&0<t.length&&$errorContainer.prepend(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"success",a='<div class="modal__'.concat(t,'"><p>');Array.isArray(e)?errors.forEach(function(e){a+=e+"<br>"}):a=e;return a}(t,i))}hint=$(".settings__button-hint"),$(".settings__add-workplace").click(function(){t<=5&&($(".settings__workplace:last-of-type").clone().insertBefore($(this)).find($("input")).val(""),t++,a<=1&&hint.text($(this).data("title")).show(60))}),$(".settings__add-workplace").on("contextmenu",function(e){return 1<t&&($(".settings__workplace:last-of-type").remove(),t--,a++,sessionStorage.setItem("hintCount",a)),!1}),$(".settings__add-workplace").on({mouseenter:function(){a<=1&&hint.text($(this).data("title")).show(60)},mouseleave:function(){hint.hide(),a++,sessionStorage.setItem("hintCount",a)}}),hint.click(function(){a++,sessionStorage.setItem("hintCount",a)}),1024<=window.innerWidth&&$(".js-date, #registration-borth-date, #settings-borth-date").datepicker({maxDate:new Date,dateFormat:"dd.mm.yyyy",position:"top left",view:"years",range:!1,clearButton:!0,todayButton:new Date,autoClose:!0,language:{months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]}}),$(".js-date, #registration-borth-date, #settings-borth-date").inputmask({mask:"99.99.9999",validator:"[0-9]"}),$("#settings-work-date").datepicker({maxDate:new Date,dateFormat:"dd.mm.yyyy",position:"top left",view:"years",range:!0,clearButton:!0,todayButton:new Date,multipleDatesSeparator:" - ",autoClose:!0,language:{months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]}}),$(".registration-username, .settings-username").inputmask({mask:"*{3,30} *{3,30} *{3,30}",greedy:!0,validator:"[0-9A-Za-z!]",onincomplete:function(){var e=this;$(this).parent().addClass("invalid"),setTimeout(function(){$(e).parent().removeClass("invalid")},3e3)}}),$("input[type='tel']").inputmask({mask:"+7 (999) 999-99-99",greedy:!0,validator:"[0-9]"}),$(".contact-form-email, .settings-email, .registration-email").inputmask({alias:"email",definitions:{"*":{validator:"[0-9A-Za-z!_-]",cardinality:1,casing:"lower"}}}),$(".settings-insta").inputmask({mask:"https://inst\\agr\\am.com/*{1,30}",greedy:!1,definitions:{"*":{validator:"[.@0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}),$(".settings-fb").inputmask({mask:"https://f\\acebook.com/*{1,30}",greedy:!1,definitions:{"*":{validator:"[.@0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}),$(".new-article__content").on("focus",function(){$(".new-article__input-wrapper--image").addClass("go-back")}),$(".new-article__content").on("focusout",function(){$(".new-article__input-wrapper--image").removeClass("go-back")}),$(".header__burger").click(function(){$(".header__burger-row").toggleClass("header__burger-row--open"),$(".header__menu").slideToggle(260)}),$(document).mouseup(function(e){var t=$(".header__menu, .header__burger"),a=window.matchMedia("(max-width: 1023px)").matches;!t.is(e.target)&&0===t.has(e.target).length&&a&&($(".header__menu").slideUp(260),$(".header__burger-row").removeClass("header__burger-row--open"))}),$(window).on("load resize orientationchange",function(){window.matchMedia("(max-width: 699px)").matches?$(".registration-add-spec, .settings-add-spec").attr("placeholder","Доп. специальность"):$(".registration-add-spec, .settings-add-spec").attr("placeholder","Дополнительная специальность")}),new Swiper(".partners swiper-container",{loop:!1,pagination:!1,navigation:!1,scrollbar:!1,slidesPerView:1,breakpoints:{565:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4}}}),new Swiper(".spec .swiper-container, .past-events .swiper-container",{loop:!1,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},navigation:!1,scrollbar:!1,slidesPerView:1,spaceBetween:20,breakpoints:{768:{slidesPerView:2,spaceBetween:40},1024:{slidesPerView:3,spaceBetween:70}}}),$(".ajax-form").submit(function(e){var t=this,a=[],i=$(this).find(".js-password"),n=$(this).find(".js-password-confirm");0<i.length&&(i=String(i.val()).trim(),n=String(n.val()).trim(),i&&i.length<6?a.push("Пароль должен быть не менее 6 символов длиной."):i&&i!==n&&a.push("Неверное подтверждение пароля.")),0<a.length?(e.preventDefault(),s(this,a,"error")):(a=$(this).attr("action"),$.ajax({type:"POST",url:a,data:$(this).serialize(),timeout:3e3,error:function(){s(t,"Что-то пошло не так! Обновите страницу и попробуйте позже.","error")},success:function(e){e.url?window.location.href=e.url:s(t,e.message,"ok"===e.type?"success":"error")}}))})});