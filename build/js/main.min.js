function ownKeys(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(e){_defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}$(function(){var e=window.navigator.userAgent;function c(e,t,a){var n=2<arguments.length&&void 0!==a?a:"success",i=0<$(e).parent("#modal-settings").length?$(e).find(".settings__top-box"):$(e);i.find(".modal__error").remove(),i.find(".modal__success").remove(),t&&0<t.length&&i.prepend(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"success",a='<div class="modal__'.concat(t,'">');Array.isArray(e)?errors.forEach(function(e){a+=e+"<br>"}):a+=e;return a+="<p>"}(t,n))}function s(e){var t=e.action,a=e.TYPE,n=e.id,i=e.data,r=e.$container,o=r.find(".js-workplace-list"),s=r.find(".settings__workplace");$.ajax({type:"POST",url:t,dataType:"json",data:_objectSpread({TYPE:a,id:n},i),timeout:3e3}).done(function(e){o.html(e.data),d(r)}).fail(function(){c(s,"Что-то пошло не так! Обновите страницу и попробуйте позже.","error")})}function l(e){var t=e.$container,a=e.id,n=void 0===a?0:a,a=e.data,e=void 0===a?[]:a,a=t.find(".settings__add-workplace"),i=t.find(".settings__workplace");c(t),0<e.length?e.forEach(function(e){i.find("input[name=".concat(e.name,"]")).val(e.value)}):i.closest("form").trigger("reset"),i.find("input[name=id]").val(n),a.removeClass("active"),i.addClass("active")}function d(e){var t=e.find(".settings__add-workplace");e.find(".settings__workplace").removeClass("active"),t.addClass("active")}(/trident/gi.test(e)||/msie/gi.test(e))&&$("body").addClass("ie-active"),$(".js-modal-call").click(function(){var e=$(this).data("modal");$("body").addClass("no-scroll"),$(".modal").fadeIn(260),$(e).siblings().hide(),$(e).show(),$("body *:not(.modal *)").attr("tabindex",-1)}),$(".modal__overlay, .modal__close").click(function(){$("body").removeClass("no-scroll"),$(".modal").fadeOut(260),$(".modal .modal__content-wrapper").fadeOut(300),$("body *:not(.modal *)").removeAttr("tabindex")}),$(".js-info-open").on("click focus",function(){$(this).toggleClass("info-box__title--open"),$(this).siblings(".info-box__content").slideToggle(260),($(this).parent().hasClass("modal__info-box")?$(".modal"):$("body")).animate({scrollTop:$(this).offset().top},260)}),$(".settings-user-photo").change(function(){var e;this.files&&this.files[0]&&((e=new FileReader).onload=function(e){$(".settings__input-wrapper--picture>img").attr("src",e.target.result)},e.readAsDataURL(this.files[0]))}),$(".new-article-pic").change(function(){var e;this.files&&this.files[0]&&((e=new FileReader).onload=function(e){$(".new-article__image").attr("src",e.target.result)},e.readAsDataURL(this.files[0]))}),1024<=window.innerWidth&&$(".js-date, #registration-borth-date, #settings-borth-date").datepicker({maxDate:new Date,dateFormat:"dd.mm.yyyy",position:"top left",view:"years",range:!1,clearButton:!0,todayButton:new Date,autoClose:!0,language:{months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]}}),$(".js-date, #registration-borth-date, #settings-borth-date").inputmask({mask:"99.99.9999",validator:"[0-9]"}),$("#settings-work-date").datepicker({maxDate:new Date,dateFormat:"dd.mm.yyyy",position:"top left",view:"years",range:!0,clearButton:!0,todayButton:new Date,multipleDatesSeparator:" - ",autoClose:!0,language:{months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]}}),$(".registration-username, .settings-username").inputmask({mask:"*{3,30} *{3,30} *{3,30}",greedy:!0,validator:"[0-9A-Za-z!]",onincomplete:function(){var e=this;$(this).parent().addClass("invalid"),setTimeout(function(){$(e).parent().removeClass("invalid")},3e3)}}),$("input[type='tel']").inputmask({mask:"+7 (999) 999-99-99",greedy:!0,validator:"[0-9]"}),$(".contact-form-email, .settings-email, .registration-email").inputmask({alias:"email",definitions:{"*":{validator:"[0-9A-Za-z!_-]",cardinality:1,casing:"lower"}}}),$(".settings-insta").inputmask({mask:"https://inst\\agr\\am.com/*{1,30}",greedy:!1,definitions:{"*":{validator:"[.@0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}),$(".settings-fb").inputmask({mask:"https://f\\acebook.com/*{1,30}",greedy:!1,definitions:{"*":{validator:"[.@0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}),$(".new-article__content").on("focus",function(){$(".new-article__input-wrapper--image").addClass("go-back")}),$(".new-article__content").on("focusout",function(){$(".new-article__input-wrapper--image").removeClass("go-back")}),$(".header__burger").click(function(){$(".header__burger-row").toggleClass("header__burger-row--open"),$(".header__menu").slideToggle(260)}),$(document).mouseup(function(e){var t=$(".header__menu, .header__burger"),a=window.matchMedia("(max-width: 1023px)").matches;!t.is(e.target)&&0===t.has(e.target).length&&a&&($(".header__menu").slideUp(260),$(".header__burger-row").removeClass("header__burger-row--open"))}),$(window).on("load resize orientationchange",function(){window.matchMedia("(max-width: 699px)").matches?$(".registration-add-spec, .settings-add-spec").attr("placeholder","Доп. специальность"):$(".registration-add-spec, .settings-add-spec").attr("placeholder","Дополнительная специальность")}),new Swiper(".partners swiper-container",{loop:!1,pagination:!1,navigation:!1,scrollbar:!1,slidesPerView:1,breakpoints:{565:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4}}}),new Swiper(".spec .swiper-container, .past-events .swiper-container",{loop:!1,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},navigation:!1,scrollbar:!1,slidesPerView:1,spaceBetween:20,breakpoints:{768:{slidesPerView:2,spaceBetween:40},1024:{slidesPerView:3,spaceBetween:70}}}),$(".ajax-form").submit(function(e){var t=this;e.preventDefault();var a=[],n=$(this).find(".js-password"),e=$(this).find(".js-password-confirm");0<n.length&&(n=String(n.val()).trim(),e=String(e.val()).trim(),n&&n.length<6?a.push("Пароль должен быть не менее 6 символов длиной."):n&&n!==e&&a.push("Неверное подтверждение пароля.")),0<a.length?c(this,a,"error"):(a=$(this).attr("action"),$.ajax({type:"POST",url:a,dataType:"json",data:$(this).serialize(),timeout:3e3,error:function(){c(t,"Что-то пошло не так! Обновите страницу и попробуйте позже.","error")},success:function(e){e.url?window.location.href=e.url:c(t,e.message,"ok"===e.type?"success":"error")}}))}),$(".js-workplace").each(function(){var n=$(this),e=n.find(".settings__add-workplace"),t=n.find(".js-workplace-cancel"),i=n.find(".settings__workplace-wrapper"),r=n.find(".settings__workplace"),o=n.attr("action");e.click(function(e){e.preventDefault(),l({$container:n})}),n.on("click",".js-workplace-edit",function(e){e.preventDefault();var t=$(this).closest(".js-workplace-item"),e=t.data("id"),a=[];t.find(".info-box__col[data-name]").each(function(){var e=$(this).data("name"),t=$(this).html();a.push({name:e,value:t})}),l({$container:n,id:e,data:a})}),n.on("click",".js-workplace-remove",function(e){e.preventDefault();e=$(this).closest(".js-workplace-item").data("id");s({action:o,TYPE:"DELETE",id:e,$container:i})}),t.click(function(e){e.preventDefault(),d(n)}),n.submit(function(e){e.preventDefault();var e=0==r.find("input[name=id]").val()?"NEW":"EDIT",a={};r.find("input").each(function(){var e=$(this).attr("name"),t=$(this).val();a[e]=t}),s({action:o,TYPE:e,data:a,$container:i})})})});